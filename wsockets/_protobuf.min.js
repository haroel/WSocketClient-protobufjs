const UND="undefined";function __Long(){"use strict";function t(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function e(t){return!0===(t&&t.__isLong__)}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),t.isLong=e;var i={},r={};function n(t,e){var n,s,f;return e?(f=0<=(t>>>=0)&&t<256)&&(s=r[t])?s:(n=o(t,(0|t)<0?-1:0,!0),f&&(r[t]=n),n):(f=-128<=(t|=0)&&t<128)&&(s=i[t])?s:(n=o(t,t<0?-1:0,!1),f&&(i[t]=n),n)}function s(t,e){if(isNaN(t)||!isFinite(t))return e?d:y;if(e){if(t<0)return d;if(t>=l)return m}else{if(t<=-c)return b;if(t+1>=c)return v}return t<0?s(-t,e).neg():o(t%u|0,t/u|0,e)}function o(e,i,r){return new t(e,i,r)}t.fromInt=n,t.fromNumber=s,t.fromBits=o;var f=Math.pow;function h(t,e,i){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return y;if("number"==typeof e?(i=e,e=!1):e=!!e,(i=i||10)<2||36<i)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("");if(0===r)return h(t.substring(1),e,i).neg();for(var n=s(f(i,8)),o=y,a=0;a<t.length;a+=8){var u=Math.min(8,t.length-a),l=parseInt(t.substring(a,a+u),i);if(u<8){var c=s(f(i,u));o=o.mul(c).add(s(l))}else o=(o=o.mul(n)).add(s(l))}return o.unsigned=e,o}function a(e){return e instanceof t?e:"number"==typeof e?s(e):"string"==typeof e?h(e):o(e.low,e.high,e.unsigned)}t.fromString=h,t.fromValue=a;var u=4294967296,l=u*u,c=l/2,p=n(1<<24),y=n(0);t.ZERO=y;var d=n(0,!0);t.UZERO=d;var g=n(1);t.ONE=g;var w=n(1,!0);t.UONE=w;var E=n(-1);t.NEG_ONE=E;var v=o(-1,2147483647,!1);t.MAX_VALUE=v;var m=o(-1,-1,!0);t.MAX_UNSIGNED_VALUE=m;var b=o(0,-2147483648,!1);t.MIN_VALUE=b;var T=t.prototype;return T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*u+(this.low>>>0):this.high*u+(this.low>>>0)},T.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(b)){var e=s(t),i=this.div(e),r=i.mul(e).sub(this);return i.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=s(f(t,6),this.unsigned),o=this,h="";;){var a=o.div(n),u=(o.sub(a.mul(n)).toInt()>>>0).toString(t);if((o=a).isZero())return u+h;for(;u.length<6;)u="0"+u;h=""+u+h}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(b)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},T.isZero=function(){return 0===this.high&&0===this.low},T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1==(1&this.low)},T.isEven=function(){return 0==(1&this.low)},T.equals=function(t){return e(t)||(t=a(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},T.eq=T.equals,T.notEquals=function(t){return!this.eq(t)},T.neq=T.notEquals,T.lessThan=function(t){return this.comp(t)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(t){return this.comp(t)<=0},T.lte=T.lessThanOrEqual,T.greaterThan=function(t){return this.comp(t)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(t){return this.comp(t)>=0},T.gte=T.greaterThanOrEqual,T.compare=function(t){if(e(t)||(t=a(t)),this.eq(t))return 0;var i=this.isNegative(),r=t.isNegative();return i&&!r?-1:!i&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(b)?b:this.not().add(g)},T.neg=T.negate,T.add=function(t){e(t)||(t=a(t));var i=this.high>>>16,r=65535&this.high,n=this.low>>>16,s=65535&this.low,f=t.high>>>16,h=65535&t.high,u=t.low>>>16,l=0,c=0,p=0,y=0;return p+=(y+=s+(65535&t.low))>>>16,c+=(p+=n+u)>>>16,l+=(c+=r+h)>>>16,l+=i+f,o((p&=65535)<<16|(y&=65535),(l&=65535)<<16|(c&=65535),this.unsigned)},T.subtract=function(t){return e(t)||(t=a(t)),this.add(t.neg())},T.sub=T.subtract,T.multiply=function(t){if(this.isZero())return y;if(e(t)||(t=a(t)),t.isZero())return y;if(this.eq(b))return t.isOdd()?b:y;if(t.eq(b))return this.isOdd()?b:y;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(p)&&t.lt(p))return s(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,r=65535&this.high,n=this.low>>>16,f=65535&this.low,h=t.high>>>16,u=65535&t.high,l=t.low>>>16,c=65535&t.low,d=0,g=0,w=0,E=0;return w+=(E+=f*c)>>>16,g+=(w+=n*c)>>>16,w&=65535,g+=(w+=f*l)>>>16,d+=(g+=r*c)>>>16,g&=65535,d+=(g+=n*l)>>>16,g&=65535,d+=(g+=f*u)>>>16,d+=i*c+r*l+n*u+f*h,o((w&=65535)<<16|(E&=65535),(d&=65535)<<16|(g&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(t){if(e(t)||(t=a(t)),t.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?d:y;var i,r,n;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return d;if(t.gt(this.shru(1)))return w;n=d}else{if(this.eq(b))return t.eq(g)||t.eq(E)?b:t.eq(b)?g:(i=this.shr(1).div(t).shl(1)).eq(y)?t.isNegative()?g:E:(r=this.sub(t.mul(i)),n=i.add(r.div(t)));if(t.eq(b))return this.unsigned?d:y;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();n=y}for(r=this;r.gte(t);){i=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(i)/Math.LN2),h=o<=48?1:f(2,o-48),u=s(i),l=u.mul(t);l.isNegative()||l.gt(r);)l=(u=s(i-=h,this.unsigned)).mul(t);u.isZero()&&(u=g),n=n.add(u),r=r.sub(l)}return n},T.div=T.divide,T.modulo=function(t){return e(t)||(t=a(t)),this.sub(this.div(t).mul(t))},T.mod=T.modulo,T.not=function(){return o(~this.low,~this.high,this.unsigned)},T.and=function(t){return e(t)||(t=a(t)),o(this.low&t.low,this.high&t.high,this.unsigned)},T.or=function(t){return e(t)||(t=a(t)),o(this.low|t.low,this.high|t.high,this.unsigned)},T.xor=function(t){return e(t)||(t=a(t)),o(this.low^t.low,this.high^t.high,this.unsigned)},T.shiftLeft=function(t){return e(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?o(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):o(0,this.low<<t-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(t){return e(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?o(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):o(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(t){if(e(t)&&(t=t.toInt()),0===(t&=63))return this;var i=this.high;return t<32?o(this.low>>>t|i<<32-t,i>>>t,this.unsigned):o(32===t?i:i>>>t-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},T.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&t,t>>>8&255,t>>>16&255,t>>>24&255]},T.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e]},t}function __ByteBuffer(t){"use strict";var e=function(t,i,n){if(typeof t===UND&&(t=e.DEFAULT_CAPACITY),typeof i===UND&&(i=e.DEFAULT_ENDIAN),typeof n===UND&&(n=e.DEFAULT_NOASSERT),!n){if((t|=0)<0)throw RangeError("Illegal capacity");i=!!i,n=!!n}this.buffer=0===t?r:new ArrayBuffer(t),this.view=0===t?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=t,this.littleEndian=i,this.noAssert=n};e.VERSION="5.0.1",e.LITTLE_ENDIAN=!0,e.BIG_ENDIAN=!1,e.DEFAULT_CAPACITY=16,e.DEFAULT_ENDIAN=e.BIG_ENDIAN,e.DEFAULT_NOASSERT=!1,e.Long=t||null;var i=e.prototype;i.__isByteBuffer__,Object.defineProperty(i,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var r=new ArrayBuffer(0),n=String.fromCharCode;function s(t){var e=0;return function(){return e<t.length?t.charCodeAt(e++):null}}function o(){var t=[],e=[];return function(){if(0===arguments.length)return e.join("")+n.apply(String,t);t.length+arguments.length>1024&&(e.push(n.apply(String,t)),t.length=0),Array.prototype.push.apply(t,arguments)}}function f(t,e,i,r,n){var s,o,f=8*n-r-1,h=(1<<f)-1,a=h>>1,u=-7,l=i?n-1:0,c=i?-1:1,p=t[e+l];for(l+=c,s=p&(1<<-u)-1,p>>=-u,u+=f;u>0;s=256*s+t[e+l],l+=c,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+t[e+l],l+=c,u-=8);if(0===s)s=1-a;else{if(s===h)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),s-=a}return(p?-1:1)*o*Math.pow(2,s-r)}function h(t,e,i,r,n,s){var o,f,h,a=8*s-n-1,u=(1<<a)-1,l=u>>1,c=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,y=r?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(f=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+l>=1?c/h:c*Math.pow(2,1-l))*h>=2&&(o++,h/=2),o+l>=u?(f=0,o=u):o+l>=1?(f=(e*h-1)*Math.pow(2,n),o+=l):(f=e*Math.pow(2,l-1)*Math.pow(2,n),o=0));n>=8;t[i+p]=255&f,p+=y,f/=256,n-=8);for(o=o<<n|f,a+=n;a>0;t[i+p]=255&o,p+=y,o/=256,a-=8);t[i+p-y]|=128*d}e.accessor=function(){return Uint8Array},e.allocate=function(t,i,r){return new e(t,i,r)},e.concat=function(t,i,r,n){"boolean"!=typeof i&&"string"==typeof i||(n=r,r=i,i=void 0);for(var s,o=0,f=0,h=t.length;f<h;++f)e.isByteBuffer(t[f])||(t[f]=e.wrap(t[f],i)),(s=t[f].limit-t[f].offset)>0&&(o+=s);if(0===o)return new e(0,r,n);var a,u=new e(o,r,n);for(f=0;f<h;)(s=(a=t[f++]).limit-a.offset)<=0||(u.view.set(a.view.subarray(a.offset,a.limit),u.offset),u.offset+=s);return u.limit=u.offset,u.offset=0,u},e.isByteBuffer=function(t){return!0===(t&&t.__isByteBuffer__)},e.type=function(){return ArrayBuffer},e.wrap=function(t,r,n,s){if("string"!=typeof r&&(s=n,n=r,r=void 0),"string"==typeof t)switch(typeof r===UND&&(r="utf8"),r){case"base64":return e.fromBase64(t,n);case"hex":return e.fromHex(t,n);case"binary":return e.fromBinary(t,n);case"utf8":return e.fromUTF8(t,n);case"debug":return e.fromDebug(t,n);default:throw Error(r)}if(null===t||"object"!=typeof t)throw TypeError("");var o;if(e.isByteBuffer(t))return(o=i.clone.call(t)).markedOffset=-1,o;if(t instanceof Uint8Array)o=new e(0,n,s),t.length>0&&(o.buffer=t.buffer,o.offset=t.byteOffset,o.limit=t.byteOffset+t.byteLength,o.view=new Uint8Array(t.buffer));else if(t instanceof ArrayBuffer)o=new e(0,n,s),t.byteLength>0&&(o.buffer=t,o.offset=0,o.limit=t.byteLength,o.view=t.byteLength>0?new Uint8Array(t):null);else{if("[object Array]"!==Object.prototype.toString.call(t))throw TypeError("");(o=new e(t.length,n,s)).limit=t.length;for(var f=0;f<t.length;++f)o.view[f]=t[f]}return o},i.writeBitSet=function(t,e){var i=typeof e===UND;if(i&&(e=this.offset),!this.noAssert){if(!(t instanceof Array))throw TypeError("");if("number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(e)}var r,n=e,s=t.length,o=s>>3,f=0;for(e+=this.writeVarint32(s,e);o--;)r=1&!!t[f++]|(1&!!t[f++])<<1|(1&!!t[f++])<<2|(1&!!t[f++])<<3|(1&!!t[f++])<<4|(1&!!t[f++])<<5|(1&!!t[f++])<<6|(1&!!t[f++])<<7,this.writeByte(r,e++);if(f<s){var h=0;for(r=0;f<s;)r|=(1&!!t[f++])<<h++;this.writeByte(r,e++)}return i?(this.offset=e,this):e-n},i.readBitSet=function(t){var e=typeof t===UND;e&&(t=this.offset);var i,r=this.readVarint32(t),n=r.value,s=n>>3,o=0,f=[];for(t+=r.length;s--;)i=this.readByte(t++),f[o++]=!!(1&i),f[o++]=!!(2&i),f[o++]=!!(4&i),f[o++]=!!(8&i),f[o++]=!!(16&i),f[o++]=!!(32&i),f[o++]=!!(64&i),f[o++]=!!(128&i);if(o<n){var h=0;for(i=this.readByte(t++);o<n;)f[o++]=!!(i>>h++&1)}return e&&(this.offset=t),f},i.readBytes=function(t,e){var i=typeof e===UND;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+t>this.buffer.byteLength)throw RangeError(e)}var r=this.slice(e,e+t);return i&&(this.offset+=t),r},i.writeBytes=i.append,i.writeInt8=function(t,e){var i=typeof e===UND;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(e)}e+=1;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=1,this.view[e]=t,i&&(this.offset+=1),this},i.writeByte=i.writeInt8,i.readInt8=function(t){var e=typeof t===UND;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError(t)}var i=this.view[t];return 128==(128&i)&&(i=-(255-i+1)),e&&(this.offset+=1),i},i.readByte=i.readInt8,i.writeUint8=function(t,e){var i=typeof e===UND;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(e)}e+=1;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=1,this.view[e]=t,i&&(this.offset+=1),this},i.writeUInt8=i.writeUint8,i.readUint8=function(t){var e=typeof t===UND;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError(t)}var i=this.view[t];return e&&(this.offset+=1),i},i.readUInt8=i.readUint8,i.writeInt16=function(t,e){var i=typeof e===UND;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(e)}e+=2;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=2,this.littleEndian?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),i&&(this.offset+=2),this},i.writeShort=i.writeInt16,i.readInt16=function(t){var e=typeof t===UND;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError(t)}var i=0;return this.littleEndian?(i=this.view[t],i|=this.view[t+1]<<8):(i=this.view[t]<<8,i|=this.view[t+1]),32768==(32768&i)&&(i=-(65535-i+1)),e&&(this.offset+=2),i},i.readShort=i.readInt16,i.writeUint16=function(t,e){var i=typeof e===UND;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(e)}e+=2;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=2,this.littleEndian?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),i&&(this.offset+=2),this},i.writeUInt16=i.writeUint16,i.readUint16=function(t){var e=typeof t===UND;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError(t)}var i=0;return this.littleEndian?(i=this.view[t],i|=this.view[t+1]<<8):(i=this.view[t]<<8,i|=this.view[t+1]),e&&(this.offset+=2),i},i.readUInt16=i.readUint16,i.writeInt32=function(t,e){var i=typeof e===UND;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(e)}e+=4;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=4,this.littleEndian?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),i&&(this.offset+=4),this},i.writeInt=i.writeInt32,i.readInt32=function(t){var e=typeof t===UND;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError(t)}var i=0;return this.littleEndian?(i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0),i|=0,e&&(this.offset+=4),i},i.readInt=i.readInt32,i.writeUint32=function(t,e){var i=typeof e===UND;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(e)}e+=4;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=4,this.littleEndian?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),i&&(this.offset+=4),this},i.writeUInt32=i.writeUint32,i.readUint32=function(t){var e=typeof t===UND;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError(t)}var i=0;return this.littleEndian?(i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0),e&&(this.offset+=4),i},i.readUInt32=i.readUint32,t&&(i.writeInt64=function(e,i){var r=typeof i===UND;if(r&&(i=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if("string"==typeof e)e=t.fromString(e);else if(!(e&&e instanceof t))throw TypeError(e);if("number"!=typeof i||i%1!=0)throw TypeError(i);if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError(i)}"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e)),i+=8;var n=this.buffer.byteLength;i>n&&this.resize((n*=2)>i?n:i),i-=8;var s=e.low,o=e.high;return this.littleEndian?(this.view[i+3]=s>>>24&255,this.view[i+2]=s>>>16&255,this.view[i+1]=s>>>8&255,this.view[i]=255&s,i+=4,this.view[i+3]=o>>>24&255,this.view[i+2]=o>>>16&255,this.view[i+1]=o>>>8&255,this.view[i]=255&o):(this.view[i]=o>>>24&255,this.view[i+1]=o>>>16&255,this.view[i+2]=o>>>8&255,this.view[i+3]=255&o,i+=4,this.view[i]=s>>>24&255,this.view[i+1]=s>>>16&255,this.view[i+2]=s>>>8&255,this.view[i+3]=255&s),r&&(this.offset+=8),this},i.writeLong=i.writeInt64,i.readInt64=function(e){var i=typeof e===UND;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError(e)}var r=0,n=0;this.littleEndian?(r=this.view[e+2]<<16,r|=this.view[e+1]<<8,r|=this.view[e],r+=this.view[e+3]<<24>>>0,e+=4,n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0,e+=4,r=this.view[e+1]<<16,r|=this.view[e+2]<<8,r|=this.view[e+3],r+=this.view[e]<<24>>>0);var s=new t(r,n,!1);return i&&(this.offset+=8),s},i.readLong=i.readInt64,i.writeUint64=function(e,i){var r=typeof i===UND;if(r&&(i=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if("string"==typeof e)e=t.fromString(e);else if(!(e&&e instanceof t))throw TypeError(e);if("number"!=typeof i||i%1!=0)throw TypeError(i);if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError(i)}"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e)),i+=8;var n=this.buffer.byteLength;i>n&&this.resize((n*=2)>i?n:i),i-=8;var s=e.low,o=e.high;return this.littleEndian?(this.view[i+3]=s>>>24&255,this.view[i+2]=s>>>16&255,this.view[i+1]=s>>>8&255,this.view[i]=255&s,i+=4,this.view[i+3]=o>>>24&255,this.view[i+2]=o>>>16&255,this.view[i+1]=o>>>8&255,this.view[i]=255&o):(this.view[i]=o>>>24&255,this.view[i+1]=o>>>16&255,this.view[i+2]=o>>>8&255,this.view[i+3]=255&o,i+=4,this.view[i]=s>>>24&255,this.view[i+1]=s>>>16&255,this.view[i+2]=s>>>8&255,this.view[i+3]=255&s),r&&(this.offset+=8),this},i.writeUInt64=i.writeUint64,i.readUint64=function(e){var i=typeof e===UND;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError(e)}var r=0,n=0;this.littleEndian?(r=this.view[e+2]<<16,r|=this.view[e+1]<<8,r|=this.view[e],r+=this.view[e+3]<<24>>>0,e+=4,n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0,e+=4,r=this.view[e+1]<<16,r|=this.view[e+2]<<8,r|=this.view[e+3],r+=this.view[e]<<24>>>0);var s=new t(r,n,!0);return i&&(this.offset+=8),s},i.readUInt64=i.readUint64),i.writeFloat32=function(t,e){var i=typeof e===UND;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError(t);if("number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(e)}e+=4;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=4,h(this.view,t,e,this.littleEndian,23,4),i&&(this.offset+=4),this},i.writeFloat=i.writeFloat32,i.readFloat32=function(t){var e=typeof t===UND;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError(t)}var i=f(this.view,t,this.littleEndian,23,4);return e&&(this.offset+=4),i},i.readFloat=i.readFloat32,i.writeFloat64=function(t,e){var i=typeof e===UND;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError(t);if("number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(e)}e+=8;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=8,h(this.view,t,e,this.littleEndian,52,8),i&&(this.offset+=8),this},i.writeDouble=i.writeFloat64,i.readFloat64=function(t){var e=typeof t===UND;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError(t)}var i=f(this.view,t,this.littleEndian,52,8);return e&&(this.offset+=8),i},i.readDouble=i.readFloat64,e.MAX_VARINT32_BYTES=5,e.calculateVarint32=function(t){return(t>>>=0)<128?1:t<16384?2:t<1<<21?3:t<1<<28?4:5},e.zigZagEncode32=function(t){return((t|=0)<<1^t>>31)>>>0},e.zigZagDecode32=function(t){return t>>>1^-(1&t)|0},i.writeVarint32=function(t,i){var r=typeof i===UND;if(r&&(i=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t|=0,"number"!=typeof i||i%1!=0)throw TypeError(i);if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError(i)}var n,s=e.calculateVarint32(t);i+=s;var o=this.buffer.byteLength;for(i>o&&this.resize((o*=2)>i?o:i),i-=s,t>>>=0;t>=128;)n=127&t|128,this.view[i++]=n,t>>>=7;return this.view[i++]=t,r?(this.offset=i,this):s},i.writeVarint32ZigZag=function(t,i){return this.writeVarint32(e.zigZagEncode32(t),i)},i.readVarint32=function(t){var e=typeof t===UND;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError(t)}var i,r=0,n=0;do{if(!this.noAssert&&t>this.limit){var s=Error("Truncated");throw s.truncated=!0,s}i=this.view[t++],r<5&&(n|=(127&i)<<7*r),++r}while(0!=(128&i));return n|=0,e?(this.offset=t,n):{value:n,length:r}},i.readVarint32ZigZag=function(t){var i=this.readVarint32(t);return"object"==typeof i?i.value=e.zigZagDecode32(i.value):i=e.zigZagDecode32(i),i},t&&(e.MAX_VARINT64_BYTES=10,e.calculateVarint64=function(e){"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e));var i=e.toInt()>>>0,r=e.shiftRightUnsigned(28).toInt()>>>0,n=e.shiftRightUnsigned(56).toInt()>>>0;return 0==n?0==r?i<16384?i<128?1:2:i<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:n<128?9:10},e.zigZagEncode64=function(e){return"number"==typeof e?e=t.fromNumber(e,!1):"string"==typeof e?e=t.fromString(e,!1):!1!==e.unsigned&&(e=e.toSigned()),e.shiftLeft(1).xor(e.shiftRight(63)).toUnsigned()},e.zigZagDecode64=function(e){return"number"==typeof e?e=t.fromNumber(e,!1):"string"==typeof e?e=t.fromString(e,!1):!1!==e.unsigned&&(e=e.toSigned()),e.shiftRightUnsigned(1).xor(e.and(t.ONE).toSigned().negate()).toSigned()},i.writeVarint64=function(i,r){var n=typeof r===UND;if(n&&(r=this.offset),!this.noAssert){if("number"==typeof i)i=t.fromNumber(i);else if("string"==typeof i)i=t.fromString(i);else if(!(i&&i instanceof t))throw TypeError(i);if("number"!=typeof r||r%1!=0)throw TypeError(r);if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError(r)}"number"==typeof i?i=t.fromNumber(i,!1):"string"==typeof i?i=t.fromString(i,!1):!1!==i.unsigned&&(i=i.toSigned());var s=e.calculateVarint64(i),o=i.toInt()>>>0,f=i.shiftRightUnsigned(28).toInt()>>>0,h=i.shiftRightUnsigned(56).toInt()>>>0;r+=s;var a=this.buffer.byteLength;switch(r>a&&this.resize((a*=2)>r?a:r),r-=s,s){case 10:this.view[r+9]=h>>>7&1;case 9:this.view[r+8]=9!==s?128|h:127&h;case 8:this.view[r+7]=8!==s?f>>>21|128:f>>>21&127;case 7:this.view[r+6]=7!==s?f>>>14|128:f>>>14&127;case 6:this.view[r+5]=6!==s?f>>>7|128:f>>>7&127;case 5:this.view[r+4]=5!==s?128|f:127&f;case 4:this.view[r+3]=4!==s?o>>>21|128:o>>>21&127;case 3:this.view[r+2]=3!==s?o>>>14|128:o>>>14&127;case 2:this.view[r+1]=2!==s?o>>>7|128:o>>>7&127;case 1:this.view[r]=1!==s?128|o:127&o}return n?(this.offset+=s,this):s},i.writeVarint64ZigZag=function(t,i){return this.writeVarint64(e.zigZagEncode64(t),i)},i.readVarint64=function(e){var i=typeof e===UND;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(e)}var r=e,n=0,s=0,o=0,f=0;if(n=127&(f=this.view[e++]),128&f&&(n|=(127&(f=this.view[e++]))<<7,(128&f||this.noAssert&&typeof f===UND)&&(n|=(127&(f=this.view[e++]))<<14,(128&f||this.noAssert&&typeof f===UND)&&(n|=(127&(f=this.view[e++]))<<21,(128&f||this.noAssert&&typeof f===UND)&&(s=127&(f=this.view[e++]),(128&f||this.noAssert&&typeof f===UND)&&(s|=(127&(f=this.view[e++]))<<7,(128&f||this.noAssert&&typeof f===UND)&&(s|=(127&(f=this.view[e++]))<<14,(128&f||this.noAssert&&typeof f===UND)&&(s|=(127&(f=this.view[e++]))<<21,(128&f||this.noAssert&&typeof f===UND)&&(o=127&(f=this.view[e++]),(128&f||this.noAssert&&typeof f===UND)&&(o|=(127&(f=this.view[e++]))<<7,128&f||this.noAssert&&typeof f===UND))))))))))throw Error("Buffer overrun");var h=t.fromBits(n|s<<28,s>>>4|o<<24,!1);return i?(this.offset=e,h):{value:h,length:e-r}},i.readVarint64ZigZag=function(i){var r=this.readVarint64(i);return r&&r.value instanceof t?r.value=e.zigZagDecode64(r.value):r=e.zigZagDecode64(r),r}),i.writeCString=function(t,e){var i=typeof e===UND;i&&(e=this.offset);var r,n=t.length;if(!this.noAssert){if("string"!=typeof t)throw TypeError(t);for(r=0;r<n;++r)if(0===t.charCodeAt(r))throw RangeError(t);if("number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(e)}n=u.calculateUTF16asUTF8(s(t))[1],e+=n+1;var o=this.buffer.byteLength;return e>o&&this.resize((o*=2)>e?o:e),e-=n+1,u.encodeUTF16toUTF8(s(t),function(t){this.view[e++]=t}.bind(this)),this.view[e++]=0,i?(this.offset=e,this):n},i.readCString=function(t){var e=typeof t===UND;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError(t)}var i,r=t,n=-1;return u.decodeUTF8toUTF16(function(){if(0===n)return null;if(t>=this.limit)throw RangeError(t);return 0===(n=this.view[t++])?null:n}.bind(this),i=o(),!0),e?(this.offset=t,i()):{string:i(),length:t-r}},i.writeIString=function(t,e){var i=typeof e===UND;if(i&&(e=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError(t);if("number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(e)}var r,n=e;r=u.calculateUTF16asUTF8(s(t),this.noAssert)[1],e+=4+r;var o=this.buffer.byteLength;if(e>o&&this.resize((o*=2)>e?o:e),e-=4+r,this.littleEndian?(this.view[e+3]=r>>>24&255,this.view[e+2]=r>>>16&255,this.view[e+1]=r>>>8&255,this.view[e]=255&r):(this.view[e]=r>>>24&255,this.view[e+1]=r>>>16&255,this.view[e+2]=r>>>8&255,this.view[e+3]=255&r),e+=4,u.encodeUTF16toUTF8(s(t),function(t){this.view[e++]=t}.bind(this)),e!==n+4+r)throw RangeError(e);return i?(this.offset=e,this):e-n},i.readIString=function(t){var i=typeof t===UND;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError(t)}var r=t,n=this.readUint32(t),s=this.readUTF8String(n,e.METRICS_BYTES,t+=4);return t+=s.length,i?(this.offset=t,s.string):{string:s.string,length:t-r}},e.METRICS_CHARS="c",e.METRICS_BYTES="b",i.writeUTF8String=function(t,e){var i,r=typeof e===UND;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError(e);if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(e)}var n=e;i=u.calculateUTF16asUTF8(s(t))[1],e+=i;var o=this.buffer.byteLength;return e>o&&this.resize((o*=2)>e?o:e),e-=i,u.encodeUTF16toUTF8(s(t),function(t){this.view[e++]=t}.bind(this)),r?(this.offset=e,this):e-n},i.writeString=i.writeUTF8String,e.calculateUTF8Chars=function(t){return u.calculateUTF16asUTF8(s(t))[0]},e.calculateUTF8Bytes=function(t){return u.calculateUTF16asUTF8(s(t))[1]},e.calculateString=e.calculateUTF8Bytes,i.readUTF8String=function(t,i,r){"number"==typeof i&&(r=i,i=void 0);var n=typeof r===UND;if(n&&(r=this.offset),typeof i===UND&&(i=e.METRICS_CHARS),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t|=0,"number"!=typeof r||r%1!=0)throw TypeError(r);if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError(r)}var s,f=0,h=r;if(i===e.METRICS_CHARS){if(s=o(),u.decodeUTF8(function(){return f<t&&r<this.limit?this.view[r++]:null}.bind(this),(function(t){++f,u.UTF8toUTF16(t,s)})),f!==t)throw RangeError(f);return n?(this.offset=r,s()):{string:s(),length:r-h}}if(i===e.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError(r);if((r>>>=0)<0||r+t>this.buffer.byteLength)throw RangeError(r)}var a=r+t;if(u.decodeUTF8toUTF16(function(){return r<a?this.view[r++]:null}.bind(this),s=o(),this.noAssert),r!==a)throw RangeError(r);return n?(this.offset=r,s()):{string:s(),length:r-h}}throw TypeError(i)},i.readString=i.readUTF8String,i.writeVString=function(t,i){var r=typeof i===UND;if(r&&(i=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError(t);if("number"!=typeof i||i%1!=0)throw TypeError(i);if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError(i)}var n,o,f=i;n=u.calculateUTF16asUTF8(s(t),this.noAssert)[1],o=e.calculateVarint32(n),i+=o+n;var h=this.buffer.byteLength;if(i>h&&this.resize((h*=2)>i?h:i),i-=o+n,i+=this.writeVarint32(n,i),u.encodeUTF16toUTF8(s(t),function(t){this.view[i++]=t}.bind(this)),i!==f+n+o)throw RangeError(i);return r?(this.offset=i,this):i-f},i.readVString=function(t){var i=typeof t===UND;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError(t)}var r=t,n=this.readVarint32(t),s=this.readUTF8String(n.value,e.METRICS_BYTES,t+=n.length);return t+=s.length,i?(this.offset=t,s.string):{string:s.string,length:t-r}},i.append=function(t,i,r){"number"!=typeof i&&"string"==typeof i||(r=i,i=void 0);var n=typeof r===UND;if(n&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError(r);if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError(r)}t instanceof e||(t=e.wrap(t,i));var s=t.limit-t.offset;if(s<=0)return this;r+=s;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=s,this.view.set(t.view.subarray(t.offset,t.limit),r),t.offset+=s,n&&(this.offset+=s),this},i.appendTo=function(t,e){return t.append(this,e),this},i.assert=function(t){return this.noAssert=!t,this},i.capacity=function(){return this.buffer.byteLength},i.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},i.clone=function(t){var i=new e(0,this.littleEndian,this.noAssert);return t?(i.buffer=new ArrayBuffer(this.buffer.byteLength),i.view=new Uint8Array(i.buffer)):(i.buffer=this.buffer,i.view=this.view),i.offset=this.offset,i.markedOffset=this.markedOffset,i.limit=this.limit,i},i.compact=function(t,e){if(typeof t===UND&&(t=this.offset),typeof e===UND&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError(e);if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError(t)}if(0===t&&e===this.buffer.byteLength)return this;var i=e-t;if(0===i)return this.buffer=r,this.view=null,this.markedOffset>=0&&(this.markedOffset-=t),this.offset=0,this.limit=0,this;var n=new ArrayBuffer(i),s=new Uint8Array(n);return s.set(this.view.subarray(t,e)),this.buffer=n,this.view=s,this.markedOffset>=0&&(this.markedOffset-=t),this.offset=0,this.limit=i,this},i.copy=function(t,i){if(typeof t===UND&&(t=this.offset),typeof i===UND&&(i=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t>>>=0,"number"!=typeof i||i%1!=0)throw TypeError(i);if(i>>>=0,t<0||t>i||i>this.buffer.byteLength)throw RangeError(t)}if(t===i)return new e(0,this.littleEndian,this.noAssert);var r=i-t,n=new e(r,this.littleEndian,this.noAssert);return n.offset=0,n.limit=r,n.markedOffset>=0&&(n.markedOffset-=t),this.copyTo(n,0,t,i),n},i.copyTo=function(t,i,r,n){var s,o;if(!this.noAssert&&!e.isByteBuffer(t))throw TypeError(t);if(i=(o=typeof i===UND)?t.offset:0|i,r=(s=typeof r===UND)?this.offset:0|r,n=typeof n===UND?this.limit:0|n,i<0||i>t.buffer.byteLength)throw RangeError(i);if(r<0||n>this.buffer.byteLength)throw RangeError(r);var f=n-r;return 0===f?t:(t.ensureCapacity(i+f),t.view.set(this.view.subarray(r,n),i),s&&(this.offset+=f),o&&(t.offset+=f),this)},i.ensureCapacity=function(t){var e=this.buffer.byteLength;return e<t?this.resize((e*=2)>t?e:t):this},i.fill=function(t,e,i){var r=typeof e===UND;if(r&&(e=this.offset),"string"==typeof t&&t.length>0&&(t=t.charCodeAt(0)),typeof e===UND&&(e=this.offset),typeof i===UND&&(i=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError(e);if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError(i);if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError(e)}if(e>=i)return this;for(;e<i;)this.view[e++]=t;return r&&(this.offset=e),this},i.flip=function(){return this.limit=this.offset,this.offset=0,this},i.mark=function(t){if(t=typeof t===UND?this.offset:t,!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(t)}return this.markedOffset=t,this},i.order=function(t){return this.littleEndian=!!t,this},i.LE=function(t){return this.littleEndian=typeof t===UND||!!t,this},i.BE=function(t){return this.littleEndian=typeof t!==UND&&!t,this},i.prepend=function(t,i,r){"number"!=typeof i&&"string"==typeof i||(r=i,i=void 0);var n=typeof r===UND;if(n&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError(r);if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError(r)}t instanceof e||(t=e.wrap(t,i));var s=t.limit-t.offset;if(s<=0)return this;var o=s-r;if(o>0){var f=new ArrayBuffer(this.buffer.byteLength+o),h=new Uint8Array(f);h.set(this.view.subarray(r,this.buffer.byteLength),s),this.buffer=f,this.view=h,this.offset+=o,this.markedOffset>=0&&(this.markedOffset+=o),this.limit+=o,r+=o}else new Uint8Array(this.buffer);return this.view.set(t.view.subarray(t.offset,t.limit),r-s),t.offset=t.limit,n&&(this.offset-=s),this},i.prependTo=function(t,e){return t.prepend(this,e),this},i.printDebug=function(t){"function"!=typeof t&&(t=console.log.bind(console)),t(this.toString()+"\n"+this.toDebug(!0))},i.remaining=function(){return this.limit-this.offset},i.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},i.resize=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if((t|=0)<0)throw RangeError(t)}if(this.buffer.byteLength<t){var e=new ArrayBuffer(t),i=new Uint8Array(e);i.set(this.view),this.buffer=e,this.view=i}return this},i.reverse=function(t,e){if(typeof t===UND&&(t=this.offset),typeof e===UND&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError(e);if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError(t)}return t===e||Array.prototype.reverse.call(this.view.subarray(t,e)),this},i.skip=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);t|=0}var e=this.offset+t;if(!this.noAssert&&(e<0||e>this.buffer.byteLength))throw RangeError(e);return this.offset=e,this},i.slice=function(t,e){if(typeof t===UND&&(t=this.offset),typeof e===UND&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError(e);if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError(t)}var i=this.clone();return i.offset=t,i.limit=e,i},i.toBuffer=function(t){var e=this.offset,i=this.limit;if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError(e);if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError(i);if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError(e)}if(!t&&0===e&&i===this.buffer.byteLength)return this.buffer;if(e===i)return r;var n=new ArrayBuffer(i-e);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(e,i),0),n},i.toArrayBuffer=i.toBuffer,i.toString=function(t,e,i){if(typeof t===UND)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof t&&(i=e=t="utf8"),t){case"utf8":return this.toUTF8(e,i);case"base64":return this.toBase64(e,i);case"hex":return this.toHex(e,i);case"binary":return this.toBinary(e,i);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error(t)}};var a=function(){for(var t={},e=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],i=[],r=0,n=e.length;r<n;++r)i[e[r]]=r;return t.encode=function(t,i){for(var r,n;null!==(r=t());)i(e[r>>2&63]),n=(3&r)<<4,null!==(r=t())?(i(e[63&((n|=r>>4&15)|r>>4&15)]),n=(15&r)<<2,null!==(r=t())?(i(e[63&(n|r>>6&3)]),i(e[63&r])):(i(e[63&n]),i(61))):(i(e[63&n]),i(61),i(61))},t.decode=function(t,e){var r,n,s;function o(t){throw Error(t)}for(;null!==(r=t());)if(typeof(n=i[r])===UND&&o(r),null!==(r=t())&&(typeof(s=i[r])===UND&&o(r),e(n<<2>>>0|(48&s)>>4),null!==(r=t()))){if(typeof(n=i[r])===UND){if(61===r)break;o(r)}if(e((15&s)<<4>>>0|(60&n)>>2),null!==(r=t())){if(typeof(s=i[r])===UND){if(61===r)break;o(r)}e((3&n)<<6>>>0|s)}}},t.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)},t}();i.toBase64=function(t,e){if(typeof t===UND&&(t=this.offset),typeof e===UND&&(e=this.limit),e|=0,(t|=0)<0||e>this.capacity||t>e)throw RangeError(t+" "+e);var i;return a.encode(function(){return t<e?this.view[t++]:null}.bind(this),i=o()),i()},e.fromBase64=function(t,i){if("string"!=typeof t)throw TypeError(t);var r=new e(t.length/4*3,i),n=0;return a.decode(s(t),(function(t){r.view[n++]=t})),r.limit=n,r},e.btoa=function(t){return e.fromBinary(t).toBase64()},e.atob=function(t){return e.fromBase64(t).toBinary()},i.toBinary=function(t,e){if(typeof t===UND&&(t=this.offset),typeof e===UND&&(e=this.limit),e|=0,(t|=0)<0||e>this.capacity()||t>e)throw RangeError(t+" "+e);if(t===e)return"";for(var i=[],r=[];t<e;)i.push(this.view[t++]),i.length>=1024&&(r.push(String.fromCharCode.apply(String,i)),i=[]);return r.join("")+String.fromCharCode.apply(String,i)},e.fromBinary=function(t,i){if("string"!=typeof t)throw TypeError(t);for(var r,n=0,s=t.length,o=new e(s,i);n<s;){if((r=t.charCodeAt(n))>255)throw RangeError(r);o.view[n++]=r}return o.limit=s,o},i.toDebug=function(t){for(var e,i=-1,r=this.buffer.byteLength,n="",s="",o="";i<r;){if(-1!==i&&(n+=(e=this.view[i])<16?"0"+e.toString(16).toUpperCase():e.toString(16).toUpperCase(),t&&(s+=e>32&&e<127?String.fromCharCode(e):".")),++i,t&&i>0&&i%16==0&&i!==r){for(;n.length<51;)n+=" ";o+=n+s+"\n",n=s=""}i===this.offset&&i===this.limit?n+=i===this.markedOffset?"!":"|":i===this.offset?n+=i===this.markedOffset?"[":"<":i===this.limit?n+=i===this.markedOffset?"]":">":n+=i===this.markedOffset?"'":t||0!==i&&i!==r?" ":""}if(t&&" "!==n){for(;n.length<51;)n+=" ";o+=n+s+"\n"}return t?o:n},e.fromDebug=function(t,i,r){for(var n,s,o=t.length,f=new e((o+1)/3|0,i,r),h=0,a=0,u=!1,l=!1,c=!1,p=!1,y=!1;h<o;){switch(n=t.charAt(h++)){case"!":if(!r){if(l||c||p){y=!0;break}l=c=p=!0}f.offset=f.markedOffset=f.limit=a,u=!1;break;case"|":if(!r){if(l||p){y=!0;break}l=p=!0}f.offset=f.limit=a,u=!1;break;case"[":if(!r){if(l||c){y=!0;break}l=c=!0}f.offset=f.markedOffset=a,u=!1;break;case"<":if(!r){if(l){y=!0;break}l=!0}f.offset=a,u=!1;break;case"]":if(!r){if(p||c){y=!0;break}p=c=!0}f.limit=f.markedOffset=a,u=!1;break;case">":if(!r){if(p){y=!0;break}p=!0}f.limit=a,u=!1;break;case"'":if(!r){if(c){y=!0;break}c=!0}f.markedOffset=a,u=!1;break;case" ":u=!1;break;default:if(!r&&u){y=!0;break}if(s=parseInt(n+t.charAt(h++),16),!r&&(isNaN(s)||s<0||s>255))throw TypeError(t);f.view[a++]=s,u=!0}if(y)throw TypeError(h)}if(!r){if(!l||!p)throw TypeError(a);if(a<f.buffer.byteLength)throw TypeError(a+" < "+o)}return f},i.toHex=function(t,e){if(t=typeof t===UND?this.offset:t,e=typeof e===UND?this.limit:e,!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError(e);if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError(t+" <= "+e+" <= "+this.buffer.byteLength)}for(var i,r=new Array(e-t);t<e;)(i=this.view[t++])<16?r.push("0",i.toString(16)):r.push(i.toString(16));return r.join("")},e.fromHex=function(t,i,r){if(!r){if("string"!=typeof t)throw TypeError(t);if(t.length%2!=0)throw TypeError(t.length)}for(var n,s=t.length,o=new e(s/2|0,i),f=0,h=0;f<s;f+=2){if(n=parseInt(t.substring(f,f+2),16),!r&&(!isFinite(n)||n<0||n>255))throw TypeError(n);o.view[h++]=n}return o.limit=h,o};var u=function(){var t={MAX_CODEPOINT:1114111,encodeUTF8:function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<128?e(127&i):i<2048?(e(i>>6&31|192),e(63&i|128)):i<65536?(e(i>>12&15|224),e(i>>6&63|128),e(63&i|128)):(e(i>>18&7|240),e(i>>12&63|128),e(i>>6&63|128),e(63&i|128)),i=null},decodeUTF8:function(t,e){for(var i,r,n,s,o=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.bytes=t,e};null!==(i=t());)if(0==(128&i))e(i);else if(192==(224&i))null===(r=t())&&o([i,r]),e((31&i)<<6|63&r);else if(224==(240&i))(null===(r=t())||null===(n=t()))&&o([i,r,n]),e((15&i)<<12|(63&r)<<6|63&n);else{if(240!=(248&i))throw RangeError(i);(null===(r=t())||null===(n=t())||null===(s=t()))&&o([i,r,n,s]),e((7&i)<<18|(63&r)<<12|(63&n)<<6|63&s)}},UTF16toUTF8:function(t,e){for(var i,r=null;null!==(i=null!==r?r:t());)i>=55296&&i<=57343&&null!==(r=t())&&r>=56320&&r<=57343?(e(1024*(i-55296)+r-56320+65536),r=null):e(i);null!==r&&e(r)},UTF8toUTF16:function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<=65535?e(i):(e(55296+((i-=65536)>>10)),e(i%1024+56320)),i=null},encodeUTF16toUTF8:function(e,i){t.UTF16toUTF8(e,(function(e){t.encodeUTF8(e,i)}))},decodeUTF8toUTF16:function(e,i){t.decodeUTF8(e,(function(e){t.UTF8toUTF16(e,i)}))},calculateCodePoint:function(t){return t<128?1:t<2048?2:t<65536?3:4},calculateUTF8:function(t){for(var e,i=0;null!==(e=t());)i+=e<128?1:e<2048?2:e<65536?3:4;return i},calculateUTF16asUTF8:function(e){var i=0,r=0;return t.UTF16toUTF8(e,(function(t){++i,r+=t<128?1:t<2048?2:t<65536?3:4})),[i,r]}};return t}();return i.toUTF8=function(t,e){if(typeof t===UND&&(t=this.offset),typeof e===UND&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError(t);if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError(e);if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError(t+" <= "+e+" <= "+this.buffer.byteLength)}var i;try{u.decodeUTF8toUTF16(function(){return t<e?this.view[t++]:null}.bind(this),i=o())}catch(i){if(t!==e)throw RangeError(t+" != "+e)}return i()},e.fromUTF8=function(t,i,r){if(!r&&"string"!=typeof t)throw TypeError(t);var n=new e(u.calculateUTF16asUTF8(s(t),!0)[1],i,r),o=0;return u.encodeUTF16toUTF8(s(t),(function(t){n.view[o++]=t})),n.limit=o,n},e}function __ProtoBuf(t,e){"use strict";var i,r={};return r.ByteBuffer=t,r.Long=t.Long||null,r.VERSION="5.0.3",r.WIRE_TYPES={},r.WIRE_TYPES.VARINT=0,r.WIRE_TYPES.BITS64=1,r.WIRE_TYPES.LDELIM=2,r.WIRE_TYPES.STARTGROUP=3,r.WIRE_TYPES.ENDGROUP=4,r.WIRE_TYPES.BITS32=5,r.PACKABLE_WIRE_TYPES=[r.WIRE_TYPES.VARINT,r.WIRE_TYPES.BITS64,r.WIRE_TYPES.BITS32],r.TYPES={int32:{name:"int32",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.ZERO:void 0},uint64:{name:"uint64",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.UZERO:void 0},sint64:{name:"sint64",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.ZERO:void 0},bool:{name:"bool",wireType:r.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:"double",wireType:r.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:r.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:r.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:r.WIRE_TYPES.BITS64,defaultValue:r.Long?r.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:r.WIRE_TYPES.BITS64,defaultValue:r.Long?r.Long.ZERO:void 0},float:{name:"float",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:"enum",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:r.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:r.WIRE_TYPES.STARTGROUP,defaultValue:null}},r.MAP_KEY_TYPES=[r.TYPES.int32,r.TYPES.sint32,r.TYPES.sfixed32,r.TYPES.uint32,r.TYPES.fixed32,r.TYPES.int64,r.TYPES.sint64,r.TYPES.sfixed64,r.TYPES.uint64,r.TYPES.fixed64,r.TYPES.bool,r.TYPES.string,r.TYPES.bytes],r.ID_MIN=1,r.ID_MAX=536870911,r.convertFieldsToCamelCase=!1,r.populateAccessors=!0,r.populateDefaults=!0,r.Util=((i={}).IS_NODE=!("object"!=typeof process||process+""!="[object process]"||process.browser),i.fetch=function(t,e){},i.toCamelCase=function(t){return t.replace(/_([a-zA-Z])/g,(function(t,e){return e.toUpperCase()}))},i),r.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,FQTYPEREF:/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},r.Reflect=function(e){var i={},r=function(t,e,i){this.builder=t,this.parent=e,this.name=i,this.className},n=r.prototype;n.fqn=function(){for(var t=this.name,e=this;;){if(null==(e=e.parent))break;t=e.name+"."+t}return t},n.toString=function(t){return(t?this.className+" ":"")+this.fqn()},n.build=function(){throw Error(this.toString(!0))},i.T=r;var s=function(t,e,i,n,s){r.call(this,t,e,i),this.className="Namespace",this.children=[],this.options=n||{},this.syntax=s||"proto2"},o=s.prototype=Object.create(r.prototype);o.getChildren=function(t){if(null==(t=t||null))return this.children.slice();for(var e=[],i=0,r=this.children.length;i<r;++i)this.children[i]instanceof t&&e.push(this.children[i]);return e},o.addChild=function(t){var e;if(e=this.getChild(t.name))if(e instanceof u.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName))e.name=e.originalName;else{if(!(t instanceof u.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName)))throw Error(this.toString(!0)+": "+t.name);t.name=t.originalName}this.children.push(t)},o.getChild=function(t){for(var e="number"==typeof t?"id":"name",i=0,r=this.children.length;i<r;++i)if(this.children[i][e]===t)return this.children[i];return null},o.resolve=function(t,e){var r,n="string"==typeof t?t.split("."):t,s=this,o=0;if(""===n[o]){for(;null!==s.parent;)s=s.parent;o++}do{do{if(!(s instanceof i.Namespace)){s=null;break}if(!(r=s.getChild(n[o]))||!(r instanceof i.T)||e&&!(r instanceof i.Namespace)){s=null;break}s=r,o++}while(o<n.length);if(null!=s)break;if(null!==this.parent)return this.parent.resolve(t,e)}while(null!=s);return s},o.qn=function(t){var e=[],r=t;do{e.unshift(r.name),r=r.parent}while(null!==r);for(var n=1;n<=e.length;n++){var s=e.slice(e.length-n);if(t===this.resolve(s,t instanceof i.Namespace))return s.join(".")}return t.fqn()},o.build=function(){for(var t,e={},i=this.children,r=0,n=i.length;r<n;++r)(t=i[r])instanceof s&&(e[t.name]=t.build());return Object.defineProperty&&Object.defineProperty(e,"$options",{value:this.buildOpt()}),e},o.buildOpt=function(){for(var t={},e=Object.keys(this.options),i=0,r=e.length;i<r;++i){var n=e[i],s=this.options[e[i]];t[n]=s}return t},o.getOption=function(t){return typeof t===UND?this.options:typeof this.options[t]!==UND?this.options[t]:null},i.Namespace=s;var f=function(t,i,r,n,s){if(this.type=t,this.resolvedType=i,this.isMapKey=r,this.syntax=n,this.name=s,r&&e.MAP_KEY_TYPES.indexOf(t)<0)throw Error(t.name)},h=f.prototype;function a(t,i){if(t&&"number"==typeof t.low&&"number"==typeof t.high&&"boolean"==typeof t.unsigned&&t.low==t.low&&t.high==t.high)return new e.Long(t.low,t.high,typeof i===UND?t.unsigned:i);if("string"==typeof t)return e.Long.fromString(t,i||!1,10);if("number"==typeof t)return e.Long.fromNumber(t,i||!1);throw Error(t)}f.defaultFieldValue=function(i){if("string"==typeof i&&(i=e.TYPES[i]),typeof i.defaultValue===UND)throw Error(i.name);return i==e.TYPES.bytes?new t(0):i.defaultValue},h.toString=function(){return(this.name||"")+(this.isMapKey?"map":"value")+" element"},h.verifyValue=function(i){var r=this;function n(t,e){throw Error(r.toString(!0)+" of type "+r.type.name+": "+t+" ("+e+")")}switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:return("number"!=typeof i||i==i&&i%1!=0)&&n(typeof i,"not an integer"),i>4294967295?0|i:i;case e.TYPES.uint32:case e.TYPES.fixed32:return("number"!=typeof i||i==i&&i%1!=0)&&n(typeof i,"not an integer"),i<0?i>>>0:i;case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:if(e.Long)try{return a(i,!1)}catch(t){n(typeof i,t.message)}else n(typeof i,"requires Long.js");case e.TYPES.uint64:case e.TYPES.fixed64:if(e.Long)try{return a(i,!0)}catch(t){n(typeof i,t.message)}else n(typeof i,"requires Long.js");case e.TYPES.bool:return"boolean"!=typeof i&&n(typeof i,"not a boolean"),i;case e.TYPES.float:case e.TYPES.double:return"number"!=typeof i&&n(typeof i,"not a number"),i;case e.TYPES.string:return"string"==typeof i||i&&i instanceof String||n(typeof i,"not a string"),""+i;case e.TYPES.bytes:return t.isByteBuffer(i)?i:t.wrap(i,"base64");case e.TYPES.enum:var s=this.resolvedType.getChildren(e.Reflect.Enum.Value);for(f=0;f<s.length;f++){if(s[f].name==i)return s[f].id;if(s[f].id==i)return s[f].id}if("proto3"===this.syntax)return("number"!=typeof i||i==i&&i%1!=0)&&n(typeof i,"not an integer"),(i>4294967295||i<0)&&n(typeof i,"not in range for uint32"),i;n(i,"not a valid enum value");case e.TYPES.group:case e.TYPES.message:if(i&&"object"==typeof i||n(typeof i,"object expected"),i instanceof this.resolvedType.clazz)return i;if(i instanceof e.Builder.Message){var o={};for(var f in i)i.hasOwnProperty(f)&&(o[f]=i[f]);i=o}return new this.resolvedType.clazz(i)}throw Error(this.toString(!0)+": "+i+" (undefined type "+this.type+")")},h.calculateLength=function(i,r){if(null===r)return 0;var n;switch(this.type){case e.TYPES.int32:return r<0?t.calculateVarint64(r):t.calculateVarint32(r);case e.TYPES.uint32:return t.calculateVarint32(r);case e.TYPES.sint32:return t.calculateVarint32(t.zigZagEncode32(r));case e.TYPES.fixed32:case e.TYPES.sfixed32:case e.TYPES.float:return 4;case e.TYPES.int64:case e.TYPES.uint64:return t.calculateVarint64(r);case e.TYPES.sint64:return t.calculateVarint64(t.zigZagEncode64(r));case e.TYPES.fixed64:case e.TYPES.sfixed64:return 8;case e.TYPES.bool:return 1;case e.TYPES.enum:return t.calculateVarint32(r);case e.TYPES.double:return 8;case e.TYPES.string:return n=t.calculateUTF8Bytes(r),t.calculateVarint32(n)+n;case e.TYPES.bytes:if(r.remaining()<0)throw Error(this.toString(!0)+": "+r.remaining()+" bytes remaining");return t.calculateVarint32(r.remaining())+r.remaining();case e.TYPES.message:return n=this.resolvedType.calculate(r),t.calculateVarint32(n)+n;case e.TYPES.group:return(n=this.resolvedType.calculate(r))+t.calculateVarint32(i<<3|e.WIRE_TYPES.ENDGROUP)}throw Error(this.toString(!0)+": "+r+" (unknown type)")},h.encodeValue=function(i,r,n){if(null===r)return n;switch(this.type){case e.TYPES.int32:r<0?n.writeVarint64(r):n.writeVarint32(r);break;case e.TYPES.uint32:n.writeVarint32(r);break;case e.TYPES.sint32:n.writeVarint32ZigZag(r);break;case e.TYPES.fixed32:n.writeUint32(r);break;case e.TYPES.sfixed32:n.writeInt32(r);break;case e.TYPES.int64:case e.TYPES.uint64:n.writeVarint64(r);break;case e.TYPES.sint64:n.writeVarint64ZigZag(r);break;case e.TYPES.fixed64:n.writeUint64(r);break;case e.TYPES.sfixed64:n.writeInt64(r);break;case e.TYPES.bool:"string"==typeof r?n.writeVarint32("false"===r.toLowerCase()?0:!!r):n.writeVarint32(r?1:0);break;case e.TYPES.enum:n.writeVarint32(r);break;case e.TYPES.float:n.writeFloat32(r);break;case e.TYPES.double:n.writeFloat64(r);break;case e.TYPES.string:n.writeVString(r);break;case e.TYPES.bytes:if(r.remaining()<0)throw Error(this.toString(!0)+": "+r.remaining()+" bytes remaining");var s=r.offset;n.writeVarint32(r.remaining()),n.append(r),r.offset=s;break;case e.TYPES.message:var o=(new t).LE();this.resolvedType.encode(r,o),n.writeVarint32(o.offset),n.append(o.flip());break;case e.TYPES.group:this.resolvedType.encode(r,n),n.writeVarint32(i<<3|e.WIRE_TYPES.ENDGROUP);break;default:throw Error(this.toString(!0)+": "+r+" (unknown type)")}return n},h.decode=function(t,i,r){if(i!=this.type.wireType)throw Error(i);var n,s;switch(this.type){case e.TYPES.int32:return 0|t.readVarint32();case e.TYPES.uint32:return t.readVarint32()>>>0;case e.TYPES.sint32:return 0|t.readVarint32ZigZag();case e.TYPES.fixed32:return t.readUint32()>>>0;case e.TYPES.sfixed32:return 0|t.readInt32();case e.TYPES.int64:return t.readVarint64();case e.TYPES.uint64:return t.readVarint64().toUnsigned();case e.TYPES.sint64:return t.readVarint64ZigZag();case e.TYPES.fixed64:return t.readUint64();case e.TYPES.sfixed64:return t.readInt64();case e.TYPES.bool:return!!t.readVarint32();case e.TYPES.enum:return t.readVarint32();case e.TYPES.float:return t.readFloat();case e.TYPES.double:return t.readDouble();case e.TYPES.string:return t.readVString();case e.TYPES.bytes:if(s=t.readVarint32(),t.remaining()<s)throw Error(this.toString(!0)+": "+s+" required but got only "+t.remaining());return(n=t.clone()).limit=n.offset+s,t.offset+=s,n;case e.TYPES.message:return s=t.readVarint32(),this.resolvedType.decode(t,s);case e.TYPES.group:return this.resolvedType.decode(t,-1,r)}throw Error(this.toString(!0))},h.valueFromString=function(i){if(!this.isMapKey)throw Error(this.toString(!0));switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:case e.TYPES.uint32:case e.TYPES.fixed32:return this.verifyValue(parseInt(i));case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:case e.TYPES.uint64:case e.TYPES.fixed64:return this.verifyValue(i);case e.TYPES.bool:return"true"===i;case e.TYPES.string:return this.verifyValue(i);case e.TYPES.bytes:return t.fromBinary(i)}},h.valueToString=function(t){if(!this.isMapKey)throw Error(this.toString(!0));return this.type===e.TYPES.bytes?t.toString("binary"):t.toString()},i.Element=f;var u=function(t,e,i,r,n,o){s.call(this,t,e,i,r,o),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!n,this._fields=null,this._fieldsById=null,this._fieldsByName=null},l=u.prototype=Object.create(s.prototype);function c(t,i){var r=i.readVarint32(),n=7&r,s=r>>>3;switch(n){case e.WIRE_TYPES.VARINT:do{r=i.readUint8()}while(128==(128&r));break;case e.WIRE_TYPES.BITS64:i.offset+=8;break;case e.WIRE_TYPES.LDELIM:r=i.readVarint32(),i.offset+=r;break;case e.WIRE_TYPES.STARTGROUP:c(s,i);break;case e.WIRE_TYPES.ENDGROUP:if(s===t)return!1;throw Error(s+" ("+t+" expected)");case e.WIRE_TYPES.BITS32:i.offset+=4;break;default:throw Error(t+": "+n)}return!0}l.build=function(i){if(this.clazz&&!i)return this.clazz;var r=function(e,i){var r=i.getChildren(e.Reflect.Message.Field),n=i.getChildren(e.Reflect.Message.OneOf),s=function(o,f){e.Builder.Message.call(this);for(var h=0,a=n.length;h<a;++h)this[n[h].name]=null;for(h=0,a=r.length;h<a;++h){var u=r[h];this[u.name]=u.repeated?[]:u.map?new e.Map(u):null,!u.required&&"proto3"!==i.syntax||null===u.defaultValue||(this[u.name]=u.defaultValue)}var l;if(arguments.length>0)if(1!==arguments.length||null===o||"object"!=typeof o||!("function"!=typeof o.encode||o instanceof s)||Array.isArray(o)||o instanceof e.Map||t.isByteBuffer(o)||o instanceof ArrayBuffer||e.Long&&o instanceof e.Long)for(h=0,a=arguments.length;h<a;++h)typeof(l=arguments[h])!==UND&&this.$set(r[h].name,l);else this.$set(o)},o=s.prototype=Object.create(e.Builder.Message.prototype);o.add=function(t,r,n){var s=i._fieldsByName[t];if(!n){if(!s)throw Error(this+"#"+t+" is undefined");if(!(s instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+s.toString(!0));if(!s.repeated)throw Error(this+"#"+t+" is not a repeated field");r=s.verifyValue(r,!0)}return null===this[t]&&(this[t]=[]),this[t].push(r),this},o.$add=o.add,o.set=function(t,r,n){if(t&&"object"==typeof t){for(var s in n=r,t)t.hasOwnProperty(s)&&typeof(r=t[s])!==UND&&void 0===i._oneofsByName[s]&&this.$set(s,r,n);return this}var o=i._fieldsByName[t];if(n)this[t]=r;else{if(!o)throw Error(this+"#"+t+" is not a field: undefined");if(!(o instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+o.toString(!0));this[o.name]=r=o.verifyValue(r)}if(o&&o.oneof){var f=this[o.oneof.name];null!==r?(null!==f&&f!==o.name&&(this[f]=null),this[o.oneof.name]=o.name):f===t&&(this[o.oneof.name]=null)}return this},o.$set=o.set,o.get=function(t,r){if(r)return this[t];var n=i._fieldsByName[t];if(!(n&&n instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: undefined");if(!(n instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+n.toString(!0));return this[n.name]},o.$get=o.get;for(var f=0;f<r.length;f++){var h=r[f];h instanceof e.Reflect.Message.ExtensionField||i.builder.options.populateAccessors&&function(t){var e=t.originalName.replace(/(_[a-zA-Z])/g,(function(t){return t.toUpperCase().replace("_","")}));e=e.substring(0,1).toUpperCase()+e.substring(1);var r=t.originalName.replace(/([A-Z])/g,(function(t){return"_"+t})),n=function(e,i){return this[t.name]=i?e:t.verifyValue(e),this},s=function(){return this[t.name]};null===i.getChild("set"+e)&&(o["set"+e]=n),null===i.getChild("set_"+r)&&(o["set_"+r]=n),null===i.getChild("get"+e)&&(o["get"+e]=s),null===i.getChild("get_"+r)&&(o["get_"+r]=s)}(h)}function a(i,r,n,s){if(null===i||"object"!=typeof i){if(s&&s instanceof e.Reflect.Enum){var o=e.Reflect.Enum.getName(s.object,i);if(null!==o)return o}return i}if(t.isByteBuffer(i))return r?i.toBase64():i.toBuffer();if(e.Long.isLong(i))return n?i.toString():e.Long.fromValue(i);var f;if(Array.isArray(i))return f=[],i.forEach((function(t,e){f[e]=a(t,r,n,s)})),f;if(f={},i instanceof e.Map){for(var h=i.entries(),u=h.next();!u.done;u=h.next())f[i.keyElem.valueToString(u.value[0])]=a(u.value[1],r,n,i.valueElem.resolvedType);return f}var l=i.$type,c=void 0;for(var p in i)i.hasOwnProperty(p)&&(l&&(c=l.getChild(p))?f[p]=a(i[p],r,n,c.resolvedType):f[p]=a(i[p],r,n));return f}return o.encode=function(e,r){"boolean"==typeof e&&(r=e,e=void 0);var n=!1;e||(e=new t,n=!0);var s=e.littleEndian;try{return i.encode(this,e.LE(),r),(n?e.flip():e).LE(s)}catch(t){throw e.LE(s),t}},s.encode=function(t,e,i){return new s(t).encode(e,i)},o.calculate=function(){return i.calculate(this)},o.encodeDelimited=function(e,r){var n=!1;e||(e=new t,n=!0);var s=(new t).LE();return i.encode(this,s,r).flip(),e.writeVarint32(s.remaining()),e.append(s),n?e.flip():e},o.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toArrayBuffer()),t}},o.toArrayBuffer=o.encodeAB,o.encodeNB=function(){try{return this.encode().toBuffer()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toBuffer()),t}},o.toBuffer=o.encodeNB,o.encode64=function(){try{return this.encode().toBase64()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toBase64()),t}},o.toBase64=o.encode64,o.encodeHex=function(){try{return this.encode().toHex()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toHex()),t}},o.toHex=o.encodeHex,o.toRaw=function(t,e){return a(this,!!t,!!e,this.$type)},o.encodeJSON=function(){return JSON.stringify(a(this,!0,!0,this.$type))},s.decode=function(e,r,n){"string"==typeof r&&(n=r,r=-1),"string"==typeof e?e=t.wrap(e,n||"base64"):t.isByteBuffer(e)||(e=t.wrap(e));var s=e.littleEndian;try{var o=i.decode(e.LE(),r);return e.LE(s),o}catch(t){throw e.LE(s),t}},s.decodeDelimited=function(e,r){if("string"==typeof e?e=t.wrap(e,r||"base64"):t.isByteBuffer(e)||(e=t.wrap(e)),e.remaining()<1)return null;var n=e.offset,s=e.readVarint32();if(e.remaining()<s)return e.offset=n,null;try{var o=i.decode(e.slice(e.offset,e.offset+s).LE());return e.offset+=s,o}catch(t){throw e.offset+=s,t}},s.decode64=function(t){return s.decode(t,"base64")},s.decodeHex=function(t){return s.decode(t,"hex")},s.decodeJSON=function(t){return new s(JSON.parse(t))},o.toString=function(){return i.toString()},Object.defineProperty&&(Object.defineProperty(s,"$options",{value:i.buildOpt()}),Object.defineProperty(o,"$options",{value:s.$options}),Object.defineProperty(s,"$type",{value:i}),Object.defineProperty(o,"$type",{value:i})),s}(e,this);this._fields=[],this._fieldsById={},this._fieldsByName={},this._oneofsByName={};for(var n,s=0,o=this.children.length;s<o;s++)if((n=this.children[s])instanceof g||n instanceof u){if(r.hasOwnProperty(n.name))throw Error(n.name+" cannot override static property '"+n.name+"'");r[n.name]=n.build()}else if(n instanceof u.Field)n.build(),this._fields.push(n),this._fieldsById[n.id]=n,this._fieldsByName[n.name]=n;else if(n instanceof u.OneOf)this._oneofsByName[n.name]=n;else if(!(n instanceof u.OneOf||n instanceof E))throw Error(this.toString(!0)+": "+this.children[s].toString(!0));return this.clazz=r},l.encode=function(t,e,i){for(var r,n,s=null,o=0,f=this._fields.length;o<f;++o)n=t[(r=this._fields[o]).name],r.required&&null===n?null===s&&(s=r):r.encode(i?n:r.verifyValue(n),e,t);if(null!==s){var h=Error(this.toString(!0)+": "+s);throw h.encoded=e,h}return e},l.calculate=function(t){for(var e,i,r=0,n=0,s=this._fields.length;n<s;++n){if(i=t[(e=this._fields[n]).name],e.required&&null===i)throw Error(this.toString(!0)+": "+e);r+=e.calculate(i,t)}return r},l.decode=function(t,i,r){"number"!=typeof i&&(i=-1);for(var n,s,o,f,h=t.offset,a=new this.clazz;t.offset<h+i||-1===i&&t.remaining()>0;){if(o=(n=t.readVarint32())>>>3,(s=7&n)===e.WIRE_TYPES.ENDGROUP){if(o!==r)throw Error(this.toString(!0)+": "+o+" ("+(r?r+" expected":"not a group")+")");break}if(f=this._fieldsById[o]){if(f.repeated&&!f.options.packed)a[f.name].push(f.decode(s,t));else if(f.map){var u=f.decode(s,t);a[f.name].set(u[0],u[1])}else if(a[f.name]=f.decode(s,t),f.oneof){var l=a[f.oneof.name];null!==l&&l!==f.name&&(a[l]=null),a[f.oneof.name]=f.name}}else switch(s){case e.WIRE_TYPES.VARINT:t.readVarint32();break;case e.WIRE_TYPES.BITS32:t.offset+=4;break;case e.WIRE_TYPES.BITS64:t.offset+=8;break;case e.WIRE_TYPES.LDELIM:var p=t.readVarint32();t.offset+=p;break;case e.WIRE_TYPES.STARTGROUP:for(;c(o,t););break;default:throw Error(o+" in "+this.toString(!0)+"#decode: "+s)}}for(var y=0,d=this._fields.length;y<d;++y)if(null===a[(f=this._fields[y]).name])if("proto3"===this.syntax)a[f.name]=f.defaultValue;else{if(f.required){var g=Error(this.toString(!0)+": "+f.name);throw g.decoded=a,g}e.populateDefaults&&null!==f.defaultValue&&(a[f.name]=f.defaultValue)}return a},i.Message=u;var p=function(t,i,n,s,o,f,h,a,l,c){r.call(this,t,i,f),this.className="Message.Field",this.required="required"===n,this.repeated="repeated"===n,this.map="map"===n,this.keyType=s||null,this.type=o,this.resolvedType=null,this.id=h,this.options=a||{},this.defaultValue=null,this.oneof=l||null,this.syntax=c||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof u.ExtensionField||(this.name=e.Util.toCamelCase(this.name))},y=p.prototype=Object.create(r.prototype);y.build=function(){this.element=new f(this.type,this.resolvedType,!1,this.syntax,this.name),this.map&&(this.keyElement=new f(this.keyType,void 0,!0,this.syntax,this.name)),"proto3"!==this.syntax||this.repeated||this.map?typeof this.options.default!==UND&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=f.defaultFieldValue(this.type)},y.verifyValue=function(t,i){i=i||!1;var r,n=this;function s(t,e){throw Error(n.toString(!0)+" of type "+n.type.name+": "+t+" ("+e+")")}if(null===t)return this.required&&s(typeof t,"required"),"proto3"===this.syntax&&this.type!==e.TYPES.message&&s(typeof t,"field cannot be null"),null;if(this.repeated&&!i){Array.isArray(t)||(t=[t]);var o=[];for(r=0;r<t.length;r++)o.push(this.element.verifyValue(t[r]));return o}return this.map&&!i?t instanceof e.Map?t:(t instanceof Object||s(typeof t,"expected ProtoBuf.Map or raw object for map field"),new e.Map(this,t)):(!this.repeated&&Array.isArray(t)&&s(typeof t,"no array expected"),this.element.verifyValue(t))},y.hasWirePresence=function(t,i){if("proto3"!==this.syntax)return null!==t;if(this.oneof&&i[this.oneof.name]===this.name)return!0;switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:case e.TYPES.uint32:case e.TYPES.fixed32:return 0!==t;case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:case e.TYPES.uint64:case e.TYPES.fixed64:return 0!==t.low||0!==t.high;case e.TYPES.bool:return t;case e.TYPES.float:case e.TYPES.double:return 0!==t;case e.TYPES.string:return t.length>0;case e.TYPES.bytes:return t.remaining()>0;case e.TYPES.enum:return 0!==t;case e.TYPES.message:return null!==t;default:return!0}},y.encode=function(i,r,n){if(null===this.type||"object"!=typeof this.type)throw Error(this.toString(!0)+": "+this.type);if(null===i||this.repeated&&0==i.length)return r;try{var s;if(this.repeated)if(this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){r.writeVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),r.ensureCapacity(r.offset+=1);var o=r.offset;for(s=0;s<i.length;s++)this.element.encodeValue(this.id,i[s],r);var f=r.offset-o,h=t.calculateVarint32(f);if(h>1){var a=r.slice(o,r.offset);o+=h-1,r.offset=o,r.append(a)}r.writeVarint32(f,o-h)}else for(s=0;s<i.length;s++)r.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,i[s],r);else this.map?i.forEach((function(i,n,s){var o=t.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,n)+t.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,i);r.writeVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),r.writeVarint32(o),r.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,n,r),r.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,i,r)}),this):this.hasWirePresence(i,n)&&(r.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,i,r))}catch(t){throw Error(this.toString(!0)+": "+i+" ("+t+")")}return r},y.calculate=function(i,r){if(i=this.verifyValue(i),null===this.type||"object"!=typeof this.type)throw Error(this.toString(!0)+": "+this.type);if(null===i||this.repeated&&0==i.length)return 0;var n=0;try{var s,o;if(this.repeated)if(this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(n+=t.calculateVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),o=0,s=0;s<i.length;s++)o+=this.element.calculateLength(this.id,i[s]);n+=t.calculateVarint32(o),n+=o}else for(s=0;s<i.length;s++)n+=t.calculateVarint32(this.id<<3|this.type.wireType),n+=this.element.calculateLength(this.id,i[s]);else this.map?i.forEach((function(i,r,s){var o=t.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,r)+t.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,i);n+=t.calculateVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),n+=t.calculateVarint32(o),n+=o}),this):this.hasWirePresence(i,r)&&(n+=t.calculateVarint32(this.id<<3|this.type.wireType),n+=this.element.calculateLength(this.id,i))}catch(t){throw Error(this.toString(!0)+": "+i+" ("+t+")")}return n},y.decode=function(t,i,r){var n,s;if(!(!this.map&&t==this.type.wireType||!r&&this.repeated&&this.options.packed&&t==e.WIRE_TYPES.LDELIM||this.map&&t==e.WIRE_TYPES.LDELIM))throw Error(this.toString(!0)+": "+t+" ("+this.type.wireType+" expected)");if(t==e.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!r){s=i.readVarint32(),s=i.offset+s;for(var o=[];i.offset<s;)o.push(this.decode(this.type.wireType,i,!0));return o}if(this.map){var h=f.defaultFieldValue(this.keyType);if(n=f.defaultFieldValue(this.type),s=i.readVarint32(),i.remaining()<s)throw Error(this.toString(!0)+": "+s+" required but got only "+i.remaining());var a=i.clone();for(a.limit=a.offset+s,i.offset+=s;a.remaining()>0;){var u=a.readVarint32();t=7&u;var l=u>>>3;if(1===l)h=this.keyElement.decode(a,t,l);else{if(2!==l)throw Error(l);n=this.element.decode(a,t,l)}}return[h,n]}return this.element.decode(i,t,this.id)},i.Message.Field=p;var d=function(t,e,i,r,n,s,o){p.call(this,t,e,i,null,r,n,s,o),this.extension};d.prototype=Object.create(p.prototype),i.Message.ExtensionField=d;i.Message.OneOf=function(t,e,i){r.call(this,t,e,i),this.fields=[]};var g=function(t,e,i,r,n){s.call(this,t,e,i,r,n),this.className="Enum",this.object=null};g.getName=function(t,e){for(var i,r=Object.keys(t),n=0;n<r.length;++n)if(t[i=r[n]]===e)return i;return null},(g.prototype=Object.create(s.prototype)).build=function(t){if(this.object&&!t)return this.object;for(var i=new e.Builder.Enum,r=this.getChildren(g.Value),n=0,s=r.length;n<s;++n)i[r[n].name]=r[n].id;return Object.defineProperty&&Object.defineProperty(i,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=i},i.Enum=g;var w=function(t,e,i,n){r.call(this,t,e,i),this.className="Enum.Value",this.id=n};w.prototype=Object.create(r.prototype),i.Enum.Value=w;var E=function(t,e,i,n){r.call(this,t,e,i),this.field=n};return E.prototype=Object.create(r.prototype),i.Extension=E,i}(r),r.Builder=function(t,e,i){var r=function(t){this.ns=new i.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=t||{}},n=r.prototype;function s(t){t.messages&&t.messages.forEach((function(e){e.syntax=t.syntax,s(e)})),t.enums&&t.enums.forEach((function(e){e.syntax=t.syntax}))}return r.isMessage=function(t){return"string"==typeof t.name&&typeof t.values===UND},r.isMessageField=function(t){return"string"==typeof t.rule&&"string"==typeof t.name&&"string"==typeof t.type&&typeof t.id!==UND},r.isEnum=function(t){return"string"==typeof t.name&&!(typeof t.values===UND||!Array.isArray(t.values)||0===t.values.length)},r.isExtend=function(t){return"string"==typeof t.ref},n.reset=function(){return this.ptr=this.ns,this},n.define=function(t){if("string"!=typeof t||!e.TYPEREF.test(t))throw Error("illegal namespace: "+t);return t.split(".").forEach((function(t){var e=this.ptr.getChild(t);null===e&&this.ptr.addChild(e=new i.Namespace(this,this.ptr,t)),this.ptr=e}),this),this},n.create=function(e){if(!e)return this;if(Array.isArray(e)){if(0===e.length)return this;e=e.slice()}else e=[e];for(var n=[e];n.length>0;){if(e=n.pop(),!Array.isArray(e))throw Error(JSON.stringify(e));for(;e.length>0;){var s=e.shift();if(r.isMessage(s)){var o=new i.Message(this,this.ptr,s.name,s.options,s.isGroup,s.syntax),f={};s.oneofs&&Object.keys(s.oneofs).forEach((function(t){o.addChild(f[t]=new i.Message.OneOf(this,o,t))}),this),s.fields&&s.fields.forEach((function(t){if(null!==o.getChild(0|t.id))throw Error(o.name+": "+t.id);if(t.options&&"object"!=typeof t.options)throw Error(o.name+"#"+t.name);var e=null;if("string"==typeof t.oneof&&!(e=f[t.oneof]))throw Error(o.name+"#"+t.name+": "+t.oneof);t=new i.Message.Field(this,o,t.rule,t.keytype,t.type,t.name,t.id,t.options,e,s.syntax),e&&e.fields.push(t),o.addChild(t)}),this);var h=[];if(s.enums&&s.enums.forEach((function(t){h.push(t)})),s.messages&&s.messages.forEach((function(t){h.push(t)})),s.extensions&&("number"==typeof s.extensions[0]?o.extensions=[s.extensions]:o.extensions=s.extensions),this.ptr.addChild(o),h.length>0){n.push(e),e=h,h=null,this.ptr=o,o=null;continue}h=null}else if(r.isEnum(s))o=new i.Enum(this,this.ptr,s.name,s.options,s.syntax),s.values.forEach((function(t){o.addChild(new i.Enum.Value(this,o,t.name,t.id))}),this),this.ptr.addChild(o);else{if(!r.isExtend(s))throw Error(JSON.stringify(s));if(o=this.ptr.resolve(s.ref,!0))s.fields.forEach((function(e){if(null!==o.getChild(0|e.id))throw Error(o.name+": "+e.id);if(o.extensions){var r=!1;if(o.extensions.forEach((function(t){e.id>=t[0]&&e.id<=t[1]&&(r=!0)})),!r)throw Error(o.name+": "+e.id+" (not within valid ranges)")}var n=e.name;this.options.convertFieldsToCamelCase&&(n=t.Util.toCamelCase(n));var s=new i.Message.ExtensionField(this,o,e.rule,e.type,this.ptr.fqn()+"."+n,e.id,e.options),f=new i.Extension(this,this.ptr,e.name,s);s.extension=f,this.ptr.addChild(f),o.addChild(s)}),this);else if(!/\.?google\.protobuf\./.test(s.ref))throw Error(s.ref+" is not defined")}s=null,o=null}e=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},n.import=function(e,i){var r="/";if("string"==typeof i){if(t.Util.IS_NODE&&(i=require("path").resolve(i)),!0===this.files[i])return this.reset();this.files[i]=!0}else if("object"==typeof i){var n,o=i.root;if(t.Util.IS_NODE&&(o=require("path").resolve(o)),(o.indexOf("\\")>=0||i.file.indexOf("\\")>=0)&&(r="\\"),n=t.Util.IS_NODE?require("path").join(o,i.file):o+r+i.file,!0===this.files[n])return this.reset();this.files[n]=!0}if(e.imports&&e.imports.length>0){var f,h=!1;"object"==typeof i?(this.importRoot=i.root,h=!0,f=this.importRoot,i=i.file,(f.indexOf("\\")>=0||i.indexOf("\\")>=0)&&(r="\\")):"string"==typeof i?this.importRoot?f=this.importRoot:i.indexOf("/")>=0?""===(f=i.replace(/\/[^\/]*$/,""))&&(f="/"):i.indexOf("\\")>=0?(f=i.replace(/\\[^\\]*$/,""),r="\\"):f=".":f=null;for(var a=0;a<e.imports.length;a++)if("string"==typeof e.imports[a]){if(!f)throw Error(i);var u=e.imports[a];if("google/protobuf/descriptor.proto"===u)continue;if(u=t.Util.IS_NODE?require("path").join(f,u):f+r+u,!0===this.files[u])continue;/\.proto$/i.test(u)&&!t.DotProto&&(u=u.replace(/\.proto$/,".json"));var l=t.Util.fetch(u);if(null===l)throw Error(u+" in '"+i+"': file not found");/\.json$/i.test(u)?this.import(JSON.parse(l+""),u):this.import(t.DotProto.Parser.parse(l),u)}else i?/\.(\w+)$/.test(i)?this.import(e.imports[a],i.replace(/^(.+)\.(\w+)$/,(function(t,e,i){return e+"_import"+a+"."+i}))):this.import(e.imports[a],i+"_import"+a):this.import(e.imports[a]);h&&(this.importRoot=null)}e.package&&this.define(e.package),e.syntax&&s(e);var c=this.ptr;return e.options&&Object.keys(e.options).forEach((function(t){c.options[t]=e.options[t]})),e.messages&&(this.create(e.messages),this.ptr=c),e.enums&&(this.create(e.enums),this.ptr=c),e.extends&&this.create(e.extends),this.reset()},n.resolveAll=function(){var r;if(null==this.ptr||"object"==typeof this.ptr.type)return this;if(this.ptr instanceof i.Namespace)this.ptr.children.forEach((function(t){this.ptr=t,this.resolveAll()}),this);else if(this.ptr instanceof i.Message.Field){if(e.TYPE.test(this.ptr.type))this.ptr.type=t.TYPES[this.ptr.type];else{if(!e.TYPEREF.test(this.ptr.type))throw Error(this.ptr.toString(!0)+": "+this.ptr.type);if(!(r=(this.ptr instanceof i.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error(this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=r,r instanceof i.Enum){if(this.ptr.type=t.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==r.syntax)throw Error(this.ptr.toString(!0))}else{if(!(r instanceof i.Message))throw Error(this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=r.isGroup?t.TYPES.group:t.TYPES.message}}if(this.ptr.map){if(!e.TYPE.test(this.ptr.keyType))throw Error(this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=t.TYPES[this.ptr.keyType]}"proto3"===this.ptr.syntax&&this.ptr.repeated&&void 0===this.ptr.options.packed&&-1!==t.PACKABLE_WIRE_TYPES.indexOf(this.ptr.type.wireType)&&(this.ptr.options.packed=!0)}else if(!(this.ptr instanceof t.Reflect.Message.OneOf||this.ptr instanceof t.Reflect.Extension||this.ptr instanceof t.Reflect.Enum.Value))throw Error(typeof this.ptr+": "+this.ptr);return this.reset()},n.build=function(t){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!t)return this.result;for(var e="string"==typeof t?t.split("."):t,i=this.result,r=0;r<e.length;r++){if(!i[e[r]]){i=null;break}i=i[e[r]]}return i},n.lookup=function(t,e){return t?this.ns.resolve(t,e):this.ns},n.toString=function(){return"Builder"},r.Message=function(){},r.Enum=function(){},r}(r,r.Lang,r.Reflect),r.Map=function(t,e){var i=function(t,i){if(!t.map)throw Error(t.toString(!0));if(this.field=t,this.keyElem=new e.Element(t.keyType,null,!0,t.syntax),this.valueElem=new e.Element(t.type,t.resolvedType,!1,t.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),i)for(var r=Object.keys(i),n=0;n<r.length;n++){var s=this.keyElem.valueFromString(r[n]),o=this.valueElem.verifyValue(i[r[n]]);this.map[this.keyElem.valueToString(s)]={key:s,value:o}}},r=i.prototype;function n(t){var e=0;return{next:function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}}return r.clear=function(){this.map={}},r.delete=function(t){var e=this.keyElem.valueToString(this.keyElem.verifyValue(t)),i=e in this.map;return delete this.map[e],i},r.entries=function(){for(var t,e=[],i=Object.keys(this.map),r=0;r<i.length;r++)e.push([(t=this.map[i[r]]).key,t.value]);return n(e)},r.keys=function(){for(var t=[],e=Object.keys(this.map),i=0;i<e.length;i++)t.push(this.map[e[i]].key);return n(t)},r.values=function(){for(var t=[],e=Object.keys(this.map),i=0;i<e.length;i++)t.push(this.map[e[i]].value);return n(t)},r.forEach=function(t,e){for(var i,r=Object.keys(this.map),n=0;n<r.length;n++)t.call(e,(i=this.map[r[n]]).value,i.key,this)},r.set=function(t,e){var i=this.keyElem.verifyValue(t),r=this.valueElem.verifyValue(e);return this.map[this.keyElem.valueToString(i)]={key:i,value:r},this},r.get=function(t){var e=this.keyElem.valueToString(this.keyElem.verifyValue(t));if(e in this.map)return this.map[e].value},r.has=function(t){return this.keyElem.valueToString(this.keyElem.verifyValue(t))in this.map},i}(0,r.Reflect),r.newBuilder=function(t){return typeof(t=t||{}).convertFieldsToCamelCase===UND&&(t.convertFieldsToCamelCase=r.convertFieldsToCamelCase),typeof t.populateAccessors===UND&&(t.populateAccessors=r.populateAccessors),new r.Builder(t)},r.loadJson=function(t,e,i){return("string"==typeof e||e&&"string"==typeof e.file&&"string"==typeof e.root)&&(i=e,e=null),e&&"object"==typeof e||(e=r.newBuilder()),"string"==typeof t&&(t=JSON.parse(t)),e.import(t,i),e.resolveAll(),e},r}{const t=typeof GameGlobal!==UND?GameGlobal:typeof globalThis!==UND?globalThis:typeof window!==UND?window:typeof global!==UND?global:Object.create(null);let e=__ProtoBuf(__ByteBuffer(__Long()));t.protobuf=e}